#!/usr/bin/env bash

DIR="$HOME/.dotfiles"

ACK="$HOME/.ackrc"
BP="$HOME/.bash_profile"
BRC="$HOME/.bashrc"
INPUTRC="$HOME/.inputrc"
GC="$HOME/.gitconfig"
GI="$HOME/.gitignore"
GRC="$HOME/.gvimrc"
IRC="$HOME/.irbrc"
SCREEN="$HOME/.screenrc"
VIM="$HOME/.vim"
VRC="$HOME/.vimrc"
ZSHRC="$HOME/.zshrc"
OHMYZSHCUSTOM="$HOME/.oh-my-zsh/custom"

function erase_dotfiles {
  # echo "Erasing dotfiles..."
  rm -f $ACK
  rm -f $BP
  rm -f $BRC
  rm -f $INPUTRC
  rm -f $GC
  rm -f $GI
  rm -f $GRC
  rm -f $SCREEN
  rm -f $VIM
  rm -f $VRC
  rm -f $ZSHRC
  rm -f $OHMYZSHCUSTOM
}

function create_symlinks {
  # echo "Creating symlinks..."
  ln -s $DIR/ackrc $ACK
  ln -s $DIR/bash/profile $BP
  ln -s $DIR/bash/profile $BRC
  ln -s $DIR/bash/input $INPUTRC
  ln -s $DIR/git/config $GC
  ln -s $DIR/git/ignore $GI
  ln -s $DIR/vim/grc $GRC
  ln -s $DIR/screenrc $SCREEN
  ln -s $DIR/vim $VIM
  ln -s $DIR/vim/rc $VRC
  ln -s $DIR/zsh/rc $ZSHRC
  ln -s $DIR/zsh/custom/ $OHMYZSHCUSTOM
}

function get_google_dotfiles {
  if [ -f "~/.at_google" ]; then
    git clone sso://user/bradenw/dotfiles-google ~/.dotfiles-google/
    ~/.dotfiles-google/setup
  fi
}

# make sure the directory exists
if [ -d $DIR ]; then

  echo "Replace current dotfiles? [1 or 2]"
  select RN in "Replace" "No"; do
    case $RN in
      Replace )
        erase_dotfiles
        create_symlinks
        get_google_dotfiles
        exit 0
        ;;
      
      No )
        create_symlinks
        get_google_dotfiles
        exit 0
        ;;
    esac
  done

fi
